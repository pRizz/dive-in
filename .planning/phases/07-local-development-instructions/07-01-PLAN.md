---
phase: 07-local-development-instructions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [README.md]
autonomous: true

must_haves:
  truths:
    - "Developer can understand prerequisites (Docker Desktop, Node.js, Go versions)"
    - "Developer can follow fast dev loop using just commands"
    - "Developer can install/update local extension using just commands"
    - "Developer knows Dive CLI is bundled (not required locally)"
    - "Developer knows Vite dev server runs on port 5173"
    - "Developer has troubleshooting guidance for common issues"
  artifacts:
    - path: "README.md"
      provides: "Local development instructions"
      contains: "just ui-dev", "just install-development-extension", "docker extension dev ui-source", "5173"
  key_links:
    - from: "README.md Development section"
      to: "justfile commands"
      via: "just command references"
      pattern: "just (ui-dev|install-development-extension|reinstall-development-extension)"
---

<objective>
Update README.md with clear, command-focused local development instructions that use `just` commands as the primary workflow. Document the fast dev loop (UI dev server + Docker Desktop extension dev mode), installation/update commands, and include prerequisite version requirements and troubleshooting guidance.

Purpose: Enable new contributors to quickly set up and iterate on the extension locally without confusion about tooling or workflow.

Output: Updated README.md with improved Development section that emphasizes `just` commands, fast dev loop, and clear prerequisite requirements.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-local-development-instructions/07-CONTEXT.md
@justfile
@README.md
</context>

<tasks>

<task type="auto">
  <name>Update README.md Development section with improved local development instructions</name>
  <files>README.md</files>
  <action>
    Replace the existing "Development" section (lines 34-57) with improved instructions that:

    1. **Prerequisites section:**
       - Docker Desktop 4.10.0+ (extensions must be enabled)
       - Node.js 20+ (matches package.json engines)
       - Go 1.19+ (matches vm/go.mod)
       - Note: Dive CLI is bundled in the extension VM and not required locally

    2. **Fast dev loop (primary workflow):**
       - Start UI dev server: `just ui-dev` (runs Vite on http://localhost:5173)
       - In another terminal, connect Docker Desktop to dev server: `docker extension dev ui-source deep-dive:dev http://localhost:5173`
       - Optional: Enable debug mode: `docker extension dev debug deep-dive:dev`
       - Explain this allows hot-reload of UI changes without rebuilding the extension image

    3. **Initial setup:**
       - Install dependencies: `npm --prefix ui install`
       - Build and install local extension: `just install-development-extension`
       - This builds the image as `deep-dive:dev` and installs it in Docker Desktop

    4. **Updating local extension:**
       - After code changes, rebuild and update: `just reinstall-development-extension`
       - Or rebuild manually: `just docker-build` then `docker extension update deep-dive:dev --force`

    5. **Troubleshooting:**
       - If extension appears stale: run `just reinstall-development-extension` to clear caches
       - For docker-archive analyses: use full absolute paths (Docker Desktop requirement)
       - If UI changes don't appear: ensure dev server is running and `docker extension dev ui-source` is active

    Keep the existing reference to official Docker extension docs. Maintain clear, command-focused style. Use `just` commands as the primary path throughout. Order sections logically: Prerequisites → Fast dev loop → Initial setup → Updating → Troubleshooting.
  </action>
  <verify>
    Read README.md and confirm:
    - Prerequisites section lists Docker Desktop 4.10.0+, Node.js 20+, Go 1.19+
    - Mentions Dive CLI is bundled (not required locally)
    - Fast dev loop section shows `just ui-dev` + `docker extension dev ui-source` workflow
    - Port 5173 is mentioned for Vite dev server
    - `just install-development-extension` and `just reinstall-development-extension` are documented
    - Troubleshooting section includes guidance for stale installs and docker-archive paths
    - All commands use `just` where available
  </verify>
  <done>
    README.md Development section provides clear, command-focused instructions that enable developers to:
    - Understand prerequisites and versions
    - Follow fast dev loop with hot-reload
    - Install and update local extension using just commands
    - Troubleshoot common issues
  </done>
</task>

</tasks>

<verification>
After completion, verify README.md:
- [ ] Prerequisites clearly state minimum versions
- [ ] Fast dev loop is documented as primary workflow
- [ ] All `just` commands are referenced correctly
- [ ] Port 5173 is mentioned
- [ ] Dive CLI bundling is explained
- [ ] Troubleshooting guidance is present
- [ ] Instructions are clear and actionable
</verification>

<success_criteria>
- Developer can read README.md and successfully set up local development environment
- Developer understands the fast dev loop workflow
- Developer can install and update local extension using documented commands
- Developer knows prerequisites and version requirements
- Developer has troubleshooting guidance for common issues
</success_criteria>

<output>
After completion, create `.planning/phases/07-local-development-instructions/07-01-SUMMARY.md`
</output>
